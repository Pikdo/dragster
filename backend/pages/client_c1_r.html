<!DOCTYPE html>
<html>

<head>
    <title>Remote Rally</title>
</head>

<body>
    <div>
        Driver 1 Right tire
    </div>

    <img onmousedown="forewardCommand('D')" onmouseup="forewardCommand('U')" src="/img/foreward.png" width="100" height="100">
    <img onmousedown="backwardCommand('D')" onmouseup="backwardCommand('U')" src="/img/backward.png" width="100" height="100">
    <div> </div>
    Forewarad
    <div ontouchstart="forewardCommand('D')" ontouchend="forewardCommand('U')" style="background-color: green; height: 100px; width: 100px;">
    </div>
    backwarad
    <div ontouchstart="backwardCommand('D')" ontouchend="backwardCommand('U')" style="background-color: blue; height: 100px; width: 100px;">
    </div>
</body>
<script>
    var authToken = 'R3YKZFKBVi';

    document.cookie = 'X-Authorization=' + authToken + '; path=/';

    // const ws = new WebSocket('ws://localhost:9898/');
    // const ws = new WebSocket('ws://192.168.1.69:80/driver/1/r');
    const ws = new WebSocket('ws://username:password@192.168.1.69:80/driver/1/r');
    // const ws = new WebSocket('ws://localhost:80');

    ws.onopen = function() {
        console.log('WebSocket Client Connected');
        //ws.send('Hi this is web client.');
    };

    ws.onmessage = function(e) {
        console.log("Received: '" + e.data + "'");
    };

    function forewardCommand(event) {
        // console.log("forewardMouseDown");
        if (event === 'D' || event === 'U') {
            ws.send('{RF' + event + '}');
        }
    }

    function backwardCommand(event) {
        // console.log("forewardMouseDown");
        if (event === 'D' || event === 'U') {
            ws.send('{RB' + event + '}');
        }
    }
</script>

</html>